<%# Simple server-rendered profile page for Shares %>

<article class="shares-profile">
  <h1><%= h(@user.username) %>'s Shares</h1>

  <p>
    <strong>Balance:</strong>
    <span class="shares-balance"><%= h(@balance) %></span>
  </p>

  <h2>Recent transactions</h2>
  <% if @transactions.any? %>
    <ul class="shares-transactions">
      <% @transactions.each do |t| %>
        <li>
          <%= t.created_at.strftime("%Y-%m-%d %H:%M") %> â€”
          <%= h(t.amount) %>
          <% if t.respond_to?(:transaction_type) %>
            (<%= h(t.transaction_type) %>)
          <% end %>
        </li>
      <% end %>
    </ul>
  <% else %>
    <p>No transactions yet.</p>
  <% end %>

  <% if current_user && current_user.id == @user.id %>
    <section class="shares-send">
      <h3>Send shares (demo)</h3>
      <form action="<%= "/shares/user/#{@user.username}/send" %>" method="post">
        <input type="hidden" name="authenticity_token" value="<%= form_authenticity_token %>">
        <label>
          Target username:
          <input name="target_username" required>
        </label>
        <label>
          Amount:
          <input type="number" name="amount" min="1" required>
        </label>
        <button type="submit">Send</button>
      </form>
    </section>
  <% end %>
</article>
